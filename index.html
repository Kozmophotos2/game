<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Web Application</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
</head>
<body>
    <h1>Image Classification</h1>
    <input type="file" id="imageInput" accept="image/*">
    <button onclick="classifyImage()">Classify Image</button>
    <div id="result"></div>

    <script>
        async function loadModel() {
            // Load the pre-trained MobileNet model
            const model = await tf.loadLayersModel('https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json');
            return model;
        }

        async function classifyImage() {
            const imageInput = document.getElementById('imageInput');
            const resultDiv = document.getElementById('result');

            const model = await loadModel();

            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();

                reader.onload = async function (e) {
                    const image = new Image();
                    image.src = e.target.result;
                    image.width = 224; // MobileNet model expects 224x224 images

                    // Preprocess the image
                    const tensor = tf.browser.fromPixels(image).resizeNearestNeighbor([224, 224]).toFloat().expandDims();

                    // Make a prediction
                    const predictions = await model.predict(tensor).data();
                    const topPrediction = getTopPrediction(predictions);

                    resultDiv.innerHTML = `Prediction: ${topPrediction.className} (${(topPrediction.probability * 100).toFixed(2)}%)`;
                };

                reader.readAsDataURL(imageInput.files[0]);
            }
        }

        function getTopPrediction(predictions) {
            const topPredictionIndex = predictions.indexOf(Math.max(...predictions));
            return {
                className: IMAGENET_CLASSES[topPredictionIndex],
                probability: predictions[topPredictionIndex]
            };
        }

        const IMAGENET_CLASSES = [
            "tench, Tinca tinca",
            "goldfish, Carassius auratus",
            "great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",
            // ... (1000 ImageNet classes)
        ];
    </script>
</body>
</html>

